# ================================================================
# üöÄ SAPIENTIA LICENSE SERVER - CONFIGURACI√ìN DE ENTORNO
# ================================================================
# Archivo de configuraci√≥n para el sistema de licenciamiento universal
# Autor: Pedro Diaz Nicolas

# ================================================================
# üóÑÔ∏è CONFIGURACI√ìN DE BASE DE DATOS
# ================================================================

# PostgreSQL (Puerto 70433 para evitar conflictos)
DATABASE_URL=postgresql://sapientia_admin:SapientiaPass2026!@localhost:70433/sapientia_licenses

# Para uso interno del contenedor (no cambiar)
POSTGRES_DB=sapientia_licenses
POSTGRES_USER=sapientia_admin
POSTGRES_PASSWORD=SapientiaPass2026!

# ================================================================
# üîí CONFIGURACI√ìN DE SEGURIDAD
# ================================================================

# Clave maestra del sistema
MASTER_SECRET=SAPIENTIA_PEDRO_DIAZ_SECRET_2026

# Claves para webhooks
APP_STORE_WEBHOOK_SECRET=ODOO_STORE_SECRET_2026
GITHUB_WEBHOOK_SECRET=GITHUB_SECRET_2026

# Configuraci√≥n de encriptaci√≥n
ENCRYPTION_KEY=auto-generated

# ================================================================
# üåê CONFIGURACI√ìN DE SERVIDOR
# ================================================================

# Entorno de ejecuci√≥n
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# Configuraci√≥n del servidor web
HOST=0.0.0.0
PORT=8000
MAX_WORKERS=4

# ================================================================
# üîÑ CONFIGURACI√ìN DE REDIS (Puerto 70379)
# ================================================================

# URL de Redis para cache y sesiones
REDIS_URL=redis://localhost:70379/0
REDIS_PASSWORD=SapientiaRedis2026!

# Configuraci√≥n interna de Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ================================================================
# üéØ CONFIGURACI√ìN DE AUTOMATIZACI√ìN
# ================================================================

# Licenciamiento autom√°tico
AUTO_LICENSE_ENABLED=true
AUTO_HARDWARE_DETECTION=true

# Notificaciones por email
EMAIL_NOTIFICATIONS=true
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@sapientia.cl

# ================================================================
# üõí INTEGRACI√ìN ODOO APP STORE
# ================================================================

# URLs de webhook (actualizar en producci√≥n)
ODOO_STORE_WEBHOOK_URL=http://localhost:8000/webhook/odoo-store
GITHUB_WEBHOOK_URL=http://localhost:8000/webhook/github

# Configuraci√≥n de ventas autom√°ticas
AUTO_GENERATE_LICENSES=true
AUTO_SEND_EMAILS=true
DEFAULT_LICENSE_TYPE=standard

# ================================================================
# üåç CONFIGURACI√ìN REGIONAL
# ================================================================

# Timezone
TZ=America/Caracas

# Configuraci√≥n regional
LOCALE=es_VE.UTF-8
LANGUAGE=es_VE
CURRENCY_DEFAULT=USD

# ================================================================
# üìä CONFIGURACI√ìN DE MONITOREO
# ================================================================

# URLs de servicios de monitoreo
PROMETHEUS_URL=http://localhost:9090
GRAFANA_URL=http://localhost:3000
PGADMIN_URL=http://localhost:70050

# Credenciales de servicios administrativos
PGADMIN_EMAIL=admin@sapientia.cl
PGADMIN_PASSWORD=SapientiaPgAdmin2026!
GRAFANA_ADMIN_PASSWORD=SapientiaGrafana2026!

# ================================================================
# üîß CONFIGURACI√ìN DE DESARROLLO
# ================================================================

# Solo para desarrollo
DEV_MODE=false
RELOAD_ON_CHANGE=false
ENABLE_CORS=true

# URLs de desarrollo
DEV_FRONTEND_URL=http://localhost:3000
DEV_API_URL=http://localhost:8000

# ================================================================
# üíæ CONFIGURACI√ìN DE BACKUP
# ================================================================

# Configuraci√≥n de respaldo autom√°tico
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # 2 AM diario
BACKUP_LOCATION=/backup

# Configuraci√≥n de almacenamiento
STORAGE_PATH=/app/data
LOGS_PATH=/app/logs
UPLOADS_PATH=/app/uploads

# ================================================================
# üìß CONFIGURACI√ìN DE NOTIFICACIONES
# ================================================================

# Email templates
EMAIL_TEMPLATE_PATH=/app/templates
EMAIL_LOGO_URL=https://sapientia.cl/logo.png

# Notificaciones de eventos
NOTIFY_NEW_PURCHASE=true
NOTIFY_LICENSE_EXPIRY=true
NOTIFY_SYSTEM_ERRORS=true

# Destinatarios de notificaciones administrativas
ADMIN_EMAIL=pedro@sapientia.cl
SUPPORT_EMAIL=support@sapientia.cl

# ================================================================
# üîó URLs DE PRODUCCI√ìN (actualizar seg√∫n tu dominio)
# ================================================================

# URL base del servidor en producci√≥n
PRODUCTION_URL=https://licenses.sapientia.cl

# URLs p√∫blicas para webhooks
PUBLIC_ODOO_WEBHOOK=https://licenses.sapientia.cl/webhook/odoo-store
PUBLIC_GITHUB_WEBHOOK=https://licenses.sapientia.cl/webhook/github

# Configuraci√≥n SSL
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/sapientia.crt
SSL_KEY_PATH=/etc/ssl/private/sapientia.key

# ================================================================
# üéØ PUERTOS DE SERVICIOS (RANGO 70000 PARA EVITAR CONFLICTOS)
# ================================================================

# Puertos principales
LICENSE_SERVER_PORT=8000
POSTGRES_EXTERNAL_PORT=70433
REDIS_EXTERNAL_PORT=70379
PGADMIN_EXTERNAL_PORT=70050

# Puertos alternativos (en caso de conflicto)
POSTGRES_ALT_PORT=70434
REDIS_ALT_PORT=70380
PGADMIN_ALT_PORT=70051

# Puertos de monitoreo
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# ================================================================
# üìù NOTAS DE CONFIGURACI√ìN
# ================================================================

# 1. Cambiar MASTER_SECRET en producci√≥n
# 2. Configurar SSL_ENABLED=true para producci√≥n
# 3. Actualizar PRODUCTION_URL con tu dominio real
# 4. Configurar SMTP real para notificaciones por email
# 5. Los puertos en rango 70000 evitan conflictos con otros servicios
# 6. Backup autom√°tico configurado para las 2:00 AM diariamente
